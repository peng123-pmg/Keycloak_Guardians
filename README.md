# Keycloak Guardians - UIå¼€å‘ä½¿ç”¨æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªåŸºäº Keycloak çš„å›¢é˜Ÿåä½œç®¡ç†ç³»ç»Ÿå‰ç«¯é¡¹ç›®,è´Ÿè´£æ‰€æœ‰ç”¨æˆ·ç•Œé¢çš„å¼€å‘ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 5
- **è·¯ç”±**: React Router v7
- **è®¤è¯ä¸»é¢˜**: Keycloakify 10.0

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—®: http://localhost:5173

é¡¹ç›®ä¼šè‡ªåŠ¨æ‰“å¼€,åŒ…å«ç™»å½•é¡µé¢å’Œä¸»åº”ç”¨ç•Œé¢ã€‚

### 3. æ„å»ºé¡¹ç›®

```bash
npm run build
```

æ„å»ºå®Œæˆå,äº§ç‰©åœ¨ `dist/` ç›®å½•ã€‚

### 4. æ„å»º Keycloak ä¸»é¢˜åŒ…

```bash
npm run build-keycloak-theme
```

ç”Ÿæˆçš„ `.jar` ä¸»é¢˜åŒ…åœ¨ `dist_keycloak/` ç›®å½•,å¯éƒ¨ç½²åˆ° Keycloak æœåŠ¡å™¨ã€‚

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard/      # ä¸»ä»ªè¡¨ç›˜(åŒ…å«æ‰€æœ‰å­é¡µé¢è·¯ç”±)
â”‚   â”œâ”€â”€ MyTeams/        # æˆ‘çš„å›¢é˜Ÿ
â”‚   â”œâ”€â”€ CreatedTeams/   # æˆ‘åˆ›å»ºçš„å›¢é˜Ÿ
â”‚   â”œâ”€â”€ CreateTeam/     # åˆ›å»ºå›¢é˜Ÿ
â”‚   â”œâ”€â”€ PersonalFiles/  # ä¸ªäººæ–‡ä»¶
â”‚   â”œâ”€â”€ RecycleBin/     # å›æ”¶ç«™
â”‚   â”œâ”€â”€ TaskProgress/   # ä»»åŠ¡è¿›åº¦
â”‚   â”œâ”€â”€ NotificationCenter/  # é€šçŸ¥ä¸­å¿ƒ
â”‚   â””â”€â”€ MessageDetail/  # æ¶ˆæ¯è¯¦æƒ…
â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Button/         # æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ Input/          # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ Checkbox/       # å¤é€‰æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ FileUpload/     # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”œâ”€â”€ GlobalSearch/   # å…¨å±€æœç´¢
â”‚   â””â”€â”€ BackButton/     # è¿”å›æŒ‰é’®
â”œâ”€â”€ login/              # Keycloakç™»å½•ä¸»é¢˜
â”‚   â”œâ”€â”€ pages/          # ç™»å½•é¡µé¢(Login.tsx)
â”‚   â””â”€â”€ components/     # ç™»å½•ç›¸å…³ç»„ä»¶
â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â””â”€â”€ fileService.ts  # æ–‡ä»¶æœåŠ¡(Mockæ•°æ®)
â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ variables.css   # CSSå˜é‡(é¢œè‰²ã€å­—ä½“ç­‰)
â”‚   â””â”€â”€ global.css      # å…¨å±€æ ·å¼
â””â”€â”€ main.tsx            # åº”ç”¨å…¥å£
```

## å¼€å‘è¯´æ˜

### é¡µé¢å¯¼èˆªç»“æ„

é¡¹ç›®é‡‡ç”¨å•é¡µåº”ç”¨(SPA)æ¶æ„:
- **ç™»å½•é¡µ**: `/` - ä½¿ç”¨ Keycloak ç™»å½•ä¸»é¢˜
- **ä¸»åº”ç”¨**: ç™»å½•åè¿›å…¥ Dashboard,åŒ…å«ä¾§è¾¹æ å¯¼èˆª
  - æˆ‘çš„å›¢é˜Ÿ
  - æˆ‘åˆ›å»ºçš„
  - ä¸ªäººæ–‡ä»¶
  - å›æ”¶ç«™
  - ä»»åŠ¡è¿›åº¦
  - é€šçŸ¥ä¸­å¿ƒ

### æ ·å¼å¼€å‘

**CSSå˜é‡** (`src/styles/variables.css`):
```css
--primary-color: #4A90E2;      /* ä¸»è‰²è°ƒ */
--secondary-color: #7ED321;    /* è¾…åŠ©è‰² */
--bg-color: #F5F7FA;          /* èƒŒæ™¯è‰² */
/* ... æ›´å¤šå˜é‡ */
```

**ç»„ä»¶æ ·å¼**: æ¯ä¸ªç»„ä»¶ä½¿ç”¨ CSS Modules (`.module.css`),æ ·å¼è‡ªåŠ¨éš”ç¦»ã€‚

### é€šç”¨ç»„ä»¶ä½¿ç”¨

é¡¹ç›®æä¾›äº†ä¸€å¥—é€šç”¨ç»„ä»¶,ä½¿ç”¨å‰è¯·æŸ¥çœ‹å¯¹åº”æ–‡ä»¶:

```tsx
import { Button } from '@/components/Button';
import { Input } from '@/components/Input';
import { FileUpload } from '@/components/FileUpload';

// ä½¿ç”¨ç¤ºä¾‹
<Button variant="primary" onClick={handleClick}>
  æäº¤
</Button>
```

### æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½

`MyTeamsPage` ä¸­æœ‰å®Œæ•´çš„æ–‡ä»¶ä¸Šä¼ ç¤ºä¾‹:
```tsx
import { FileUpload } from '@/components/FileUpload';
import { fileService } from '@/services/fileService';

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<FileUpload
  onFilesSelected={handleFilesSelected}
  maxFileSize={50 * 1024 * 1024}  // 50MB
  multiple={true}
/>
```

## å¸¸è§é—®é¢˜

### 1. å¦‚ä½•æ·»åŠ æ–°é¡µé¢?

**æ­¥éª¤**:
1. åœ¨ `src/pages/` ä¸‹åˆ›å»ºæ–°é¡µé¢æ–‡ä»¶å¤¹
2. åˆ›å»ºé¡µé¢ç»„ä»¶å’Œæ ·å¼æ–‡ä»¶
3. åœ¨ `Dashboard.tsx` ä¸­æ·»åŠ è·¯ç”±
4. åœ¨ `Sidebar.tsx` ä¸­æ·»åŠ èœå•é¡¹

**ç¤ºä¾‹**:
```tsx
// src/pages/NewPage/NewPage.tsx
export const NewPage: React.FC = () => {
  return <div>æ–°é¡µé¢</div>;
};

// Dashboard.tsx ä¸­æ·»åŠ è·¯ç”±
<Route path="/new-page" element={<NewPage />} />
```

### 2. å¦‚ä½•ä¿®æ”¹ä¾§è¾¹æ èœå•?

ç¼–è¾‘ `src/pages/Dashboard/components/Sidebar.tsx`:
```tsx
const menuItems = [
  { id: 'my-teams', label: 'æˆ‘çš„å›¢é˜Ÿ', path: '/my-teams', icon: 'ğŸ‘¥' },
  // æ·»åŠ æ–°èœå•é¡¹...
];
```

### 3. å¦‚ä½•ä¿®æ”¹å…¨å±€é¢œè‰²?

ä¿®æ”¹ `src/styles/variables.css` ä¸­çš„ CSS å˜é‡:
```css
:root {
  --primary-color: #ä½ çš„é¢œè‰²;
}
```

### 4. ç™»å½•é¡µé¢åœ¨å“ªé‡Œ?

ç™»å½•é¡µé¢åœ¨ `src/login/pages/Login.tsx`,ä½¿ç”¨ Keycloakify æ¡†æ¶ã€‚

### 5. çƒ­æ›´æ–°ä¸ç”Ÿæ•ˆ?

æ£€æŸ¥:
- Vite æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- å°è¯•é‡å¯å¼€å‘æœåŠ¡å™¨: `Ctrl+C` ç„¶å `npm run dev`

## å¼€å‘æµç¨‹å»ºè®®

1. **å¯åŠ¨é¡¹ç›®**: `npm run dev`
2. **åˆ›å»ºåˆ†æ”¯**: åœ¨ feature åˆ†æ”¯ä¸Šå¼€å‘
3. **ç¼–å†™ä»£ç **: ä¸“æ³¨äº UI å’Œç”¨æˆ·äº¤äº’
4. **æµ‹è¯•åŠŸèƒ½**: åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•å„ç§æ“ä½œ
5. **æ£€æŸ¥æ ·å¼**: ç¡®ä¿å“åº”å¼è®¾è®¡å’Œä¸åŒå±å¹•å°ºå¯¸
6. **æäº¤ä»£ç **: æäº¤å‰ç¡®ä¿æ²¡æœ‰ TypeScript é”™è¯¯

## æ³¨æ„äº‹é¡¹

- Node.js ç‰ˆæœ¬å»ºè®® >= 16
- ä½¿ç”¨ Chrome æµè§ˆå™¨å¼€å‘,ä¾¿äºè°ƒè¯•
- ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨çƒ­æ›´æ–°
- æäº¤å‰è¿è¡Œ `npm run build` ç¡®ä¿èƒ½æ­£å¸¸æ„å»º
- CSS æ ·å¼ä¼˜å…ˆä½¿ç”¨å˜é‡,ä¿æŒé£æ ¼ç»Ÿä¸€
- ç»„ä»¶å°½é‡å¤ç”¨,é¿å…é‡å¤ä»£ç 

## ç¯å¢ƒé…ç½®

é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶åŒ…å«ç¯å¢ƒé…ç½®,é€šå¸¸æ— éœ€ä¿®æ”¹:
```env
VITE_USE_MOCK_AUTH=true        # Mock è®¤è¯æ¨¡å¼
VITE_BACKEND_URL=http://localhost:8081
```

å¦‚éœ€å¯¹æ¥çœŸå®åç«¯,ç”±åç«¯åŒå­¦æä¾›é…ç½®å‚æ•°ã€‚
