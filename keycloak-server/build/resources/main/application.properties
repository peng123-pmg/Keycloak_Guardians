# Keycloak OIDC setup targeting local guardians realm
quarkus.oidc.auth-server-url=http://localhost:8080/realms/guardians
quarkus.oidc.client-id=backend-service
quarkus.oidc.application-type=service
quarkus.oidc.tls.verification=none

# JWT is enabled by default via smallrye-jwt extension
# Endpoint auth policy
quarkus.http.auth.permission.roles.paths=/api/*
quarkus.http.auth.permission.roles.policy=authenticated

# Jackson JSON handling
quarkus.jackson.fail-on-unknown-properties=false

# HTTP server port
quarkus.http.port=8081

# CORS settings
quarkus.http.cors=true
quarkus.http.cors.origins=*

# Logging levels
quarkus.log.level=INFO
quarkus.log.category."com.example".level=DEBUG

# Packaging configuration (Quarkus 3)
quarkus.package.jar.enabled=true
quarkus.package.jar.type=uber-jar

# Dev mode live reload password
quarkus.live-reload.password=dev

# Keycloak admin client credentials
keycloak.server.url=http://localhost:8080
keycloak.realm=guardians
keycloak.admin.client.id=admin-cli
keycloak.admin.username=admin
keycloak.admin.password=admin

# Database connection
quarkus.datasource.db-kind=mysql
quarkus.datasource.jdbc.url=${MYSQL_JDBC_URL:jdbc:mysql://localhost:3306/iamkc?useUnicode=true&characterEncoding=UTF-8&useSSL=false&allowPublicKeyRetrieval=true}
quarkus.datasource.username=${MYSQL_USERNAME:iamkc}
quarkus.datasource.password=${MYSQL_PASSWORD:iamkc}
quarkus.datasource.jdbc.max-size=20

# Flyway migration settings
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.table=flyway_schema_history

# User synchronization options
user.sync.enabled=true
user.sync.default-quota-bytes=10737418240

# HTTP upload limits
quarkus.http.body.handle-file-uploads=true
quarkus.http.body.uploads-directory=uploads
quarkus.http.limits.max-body-size=100M

# Application code can read quarkus.http.body.uploads-directory via ConfigProperty
